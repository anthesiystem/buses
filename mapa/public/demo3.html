<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Preview · Modal Comentarios (light) · 3 opciones nuevas de Etapa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      /* Colores de ETAPA (ajusta si gustas) */
      --etapa-kit:#a6a6a6;
      --etapa-conectividad:#ff0505;
      --etapa-base-de-datos:#c0504d;
      --etapa-concepto:#ffc000;           /* <— usada en la demo */
      --etapa-pruebas-unitarias:#202231;
      --etapa-pruebas-masivas:#2d7fcf;
      --etapa-produccion:#00b050;
      --etapa-implementado:#00ff73;

      --card-bg: #ffffff;
      --muted: #6c757d;
      --line: #e9ecef;
    }

    body{ background:#f6f7fb; }

    .modal-frame{
      max-width: 1100px;
      margin: 40px auto;
      background: var(--card-bg);
      border-radius: 18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.08);
      overflow: hidden;
      border: 1px solid rgba(0,0,0,.06);
    }

    .header-compact{
      padding: 16px 20px 10px;
      border-bottom: 1px solid #f0f1f4;
      background: linear-gradient(180deg,#ffffff 0%,#fafbff 100%);
    }
    .header-compact h5{ margin:0; font-weight:700; }
    .subtext{ color: var(--muted); font-size:.92rem; }
    .progress-slim{ height:10px; background:#eef1f5; }

    /* Form card */
    .card-soft{
      border: 1px solid #edf0f3 !important;
      border-radius: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.04);
      background: #fcfdff;
    }
    .form-label{ font-weight:600; color:#4a4f5a; }
    .counter{ color:var(--muted); font-size:.8rem; }

    /* ===== Opciones nuevas de visualización de ETAPA ===== */

    /* A) Título + subrayado de color */
    .title-wrap{ display:flex; align-items:center; gap:.5rem; margin-bottom:.25rem; }
    .chip-etapa{
      display:inline-flex; align-items:center; gap:.35rem;
      padding:4px 10px; border-radius:999px; font-weight:700; font-size:.8rem;
      background: var(--etapa-concepto); color:#000;
    }
    .underline-etapa{
      height:4px; border-radius:999px; margin-bottom:12px;
      background: linear-gradient(90deg, rgba(0,0,0,.05), var(--etapa-concepto), rgba(0,0,0,.05));
    }

    /* B) Tile flotante en esquina */
    .tile-wrap{ position:relative; }
    .etapa-tile{
      position:absolute; top:-10px; right:-10px;
      background: var(--etapa-concepto); color:#000;
      border-radius: 12px; padding:8px 12px; font-weight:700;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      display:flex; align-items:center; gap:.5rem;
    }

    /* C) Avatar de color + etiqueta (junto al título) */
    .title-line{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
    .title-left{ display:flex; align-items:center; gap:.6rem; }
    .etapa-avatar{
      width:28px; height:28px; border-radius:50%;
      background: var(--etapa-concepto);
      display:grid; place-items:center; color:#000; font-size:16px;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }
    .etapa-label{ font-weight:700; color:#000; background:#fff6cc; border:1px solid #ffe58a; border-radius:999px; padding:2px 10px; font-size:.8rem; }

    /* Timeline simple para contexto visual */
    .vtl{ position: relative; padding: 18px 0 8px; }
    .vtl::before{ content:""; position:absolute; top:0; left:60px; bottom:0; width:3px; background:var(--line); border-radius:2px; }
    .vtl-item{ position:relative; margin:0 0 14px; }
    .vtl-icon{ position:absolute; left:52px; top:8px; width:18px; height:18px; border-radius:50%; background:#ced4da; box-shadow:0 0 0 5px #fff; }
    .vtl-card{ margin-left: 100px; border:1px solid #edf0f3; background:#fff; border-radius:12px; padding:12px 14px; box-shadow: 0 6px 18px rgba(0,0,0,.03); }
    .meta{ color:var(--muted); font-size:.82rem; text-align:right; }
    .dot-warning{ background:#ffc107; } .dot-danger{ background:#dc3545; } .dot-success{ background:#198754; }
  </style>
</head>
<body>

  <main class="modal-frame">
    <!-- Header -->
    <div class="header-compact">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <h5>Comentarios del registro <span class="text-secondary">#82</span></h5>
          <div class="subtext">BAJA CALIFORNIA · SPF · RNL (LICENCIAS) · Tec: IWAY</div>
        </div>
        <button class="btn btn-outline-secondary btn-sm rounded-3"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="progress progress-slim mt-3"><div class="progress-bar bg-primary" style="width:60%"></div></div>
      <small class="text-muted">Avance de etapas: 60%</small>
    </div>

    <!-- Tres variantes lado a lado -->
    <div class="p-3">
      <h6 class="text-muted mb-3">Nuevas opciones de <strong>Etapa</strong> (modo claro)</h6>

      <div class="row g-3">
        <!-- A) Título + subrayado -->
        <div class="col-12 col-lg-4">
          <form class="card card-soft border-0 p-3">
            <div class="title-wrap">
              <h6 class="m-0">Nuevo comentario</h6>
              <span class="chip-etapa"><i class="bi bi-lightbulb"></i> CONCEPTO</span>
            </div>
            <div class="underline-etapa"></div>

            <div class="mb-3">
              <label class="form-label">Encabezado</label>
              <input type="text" class="form-control" maxlength="45" placeholder="Título corto">
              <div class="d-flex justify-content-end"><small class="counter">0/45</small></div>
            </div>
            <div class="mb-3">
              <label class="form-label">Comentario</label>
              <textarea class="form-control" rows="3" maxlength="500" placeholder="Escribe el detalle..."></textarea>
              <div class="d-flex justify-content-end"><small class="counter">0/500</small></div>
            </div>
            <div class="mb-2">
              <label class="form-label">Etiqueta</label>
              <div class="d-flex flex-wrap gap-2">
                <span class="badge bg-danger">URGENTE</span>
                <span class="badge bg-warning text-dark">PRIORITARIO</span>
                <span class="badge bg-primary">IMPORTANTE</span>
                <span class="badge bg-secondary">DESFASADO</span>
                <span class="badge bg-success">SEGUIMIENTO</span>
              </div>
            </div>
            <div class="text-end"><button type="button" class="btn btn-success px-4">Guardar</button></div>
          </form>
        </div>

        <!-- B) Tile flotante en esquina -->
        <div class="col-12 col-lg-4">
          <div class="tile-wrap">
            <form class="card card-soft border-0 p-3">
              <h6 class="mb-2">Nuevo comentario</h6>
              <div class="mb-3">
                <label class="form-label">Encabezado</label>
                <input type="text" class="form-control" maxlength="45">
                <div class="d-flex justify-content-end"><small class="counter">0/45</small></div>
              </div>
              <div class="mb-3">
                <label class="form-label">Comentario</label>
                <textarea class="form-control" rows="3" maxlength="500"></textarea>
                <div class="d-flex justify-content-end"><small class="counter">0/500</small></div>
              </div>
              <div class="mb-2">
                <label class="form-label">Etiqueta</label>
                <div class="d-flex flex-wrap gap-2">
                  <span class="badge bg-danger">URGENTE</span>
                  <span class="badge bg-warning text-dark">PRIORITARIO</span>
                  <span class="badge bg-primary">IMPORTANTE</span>
                  <span class="badge bg-secondary">DESFASADO</span>
                  <span class="badge bg-success">SEGUIMIENTO</span>
                </div>
              </div>
              <div class="text-end"><button type="button" class="btn btn-success px-4">Guardar</button></div>
            </form>

            <div class="etapa-tile"><i class="bi bi-lightbulb"></i> CONCEPTO</div>
          </div>
        </div>

        <!-- C) Avatar de color + etiqueta -->
        <div class="col-12 col-lg-4">
          <form class="card card-soft border-0 p-3">
            <div class="title-line">
              <div class="title-left">
                <div class="etapa-avatar"><i class="bi bi-lightbulb"></i></div>
                <h6 class="m-0">Nuevo comentario</h6>
                <span class="etapa-label">CONCEPTO</span>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Encabezado</label>
              <input type="text" class="form-control" maxlength="45">
              <div class="d-flex justify-content-end"><small class="counter">0/45</small></div>
            </div>
            <div class="mb-3">
              <label class="form-label">Comentario</label>
              <textarea class="form-control" rows="3" maxlength="500"></textarea>
              <div class="d-flex justify-content-end"><small class="counter">0/500</small></div>
            </div>
            <div class="mb-2">
              <label class="form-label">Etiqueta</label>
              <div class="d-flex flex-wrap gap-2">
                <span class="badge bg-danger">URGENTE</span>
                <span class="badge bg-warning text-dark">PRIORITARIO</span>
                <span class="badge bg-primary">IMPORTANTE</span>
                <span class="badge bg-secondary">DESFASADO</span>
                <span class="badge bg-success">SEGUIMIENTO</span>
              </div>
            </div>
            <div class="text-end"><button type="button" class="btn btn-success px-4">Guardar</button></div>
          </form>
        </div>
      </div>
    </div>

    <!-- Timeline ejemplo (opcional) -->
    <div class="px-3 pb-4">
      <div class="vtl">
        <div class="vtl-item">
          <span class="vtl-icon dot-warning"></span>
          <div class="vtl-card">
            <div class="d-flex justify-content-between">
              <div><strong>Se encontró usuario</strong> <span class="badge" style="background:var(--etapa-base-de-datos); color:#fff;">BASE DE DATOS</span> <span class="badge bg-warning text-dark">PRIORITARIO</span></div>
              <div class="meta">12/08/2025 17:32 · admin</div>
            </div>
            <div class="mt-2 text-secondary">Detalle del hallazgo…</div>
          </div>
        </div>
        <div class="vtl-item">
          <span class="vtl-icon dot-success"></span>
          <div class="vtl-card">
            <div class="d-flex justify-content-between">
              <div><strong>Mock de interfaz</strong> <span class="badge" style="background:var(--etapa-concepto); color:#000;">CONCEPTO</span> <span class="badge bg-success">SEGUIMIENTO</span></div>
              <div class="meta">12/08/2025 16:10 · carla</div>
            </div>
            <div class="mt-2 text-secondary">Prototipo para validar campos…</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- JS: contadores de demo -->
  <script>
    document.querySelectorAll('[maxlength]').forEach(el=>{
      const cnt = el.closest('.mb-3')?.querySelector('.counter');
      if(!cnt) return;
      const max = +el.getAttribute('maxlength') || 0;
      const update = ()=> cnt.textContent = `${el.value.length}/${max}`;
      el.addEventListener('input', update); update();
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
